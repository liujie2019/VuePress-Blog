---
title: 12. Classç»§æ‰¿
---
## åŸºç¡€
```js
/**
 * ES6ç»§æ‰¿ï¼šåŸç†æ˜¯åŸºäºå¯„ç”Ÿç»„åˆç»§æ‰¿
*/
// ES6ä¸­åŸºäºclassåˆ›å»ºå‡ºæ¥çš„ç±»ä¸èƒ½å½“åšæ™®é€šå‡½æ•°æ‰§è¡Œ(ä¹Ÿå°±æ˜¯è¯´callç»§æ‰¿åœ¨ES6çš„classç»§æ‰¿ä¸­è¡Œä¸é€šï¼Œcallç»§æ‰¿éœ€è¦åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­æŠŠçˆ¶ç±»çš„æ„é€ å‡½æ•°å½“åšæ™®é€šå‡½æ•°æ‰§è¡Œ)ã€‚
class Parent {
    constructor(name) {
        this.name = name;
    }
    getName() {
        console.log(this.name);
    }
}

class Child extends Parent {
    constructor(age) {
        // éœ€è¦æ³¨æ„ï¼šå­ç±»åªè¦ç»§æ‰¿çˆ¶ç±»ï¼Œå¯ä»¥ä¸å†™constructorã€‚ä½†æ˜¯ä¸€æ—¦å†™äº†constructorï¼Œåˆ™åœ¨constructorä¸­çš„ç¬¬ä¸€è¡Œå¿…é¡»æ˜¯super()ã€‚
        // å¦‚æœä¸è°ƒç”¨superæ–¹æ³•ï¼Œå­ç±»å°±å¾—ä¸åˆ°thiså¯¹è±¡ã€‚
        super('lisi'); // superç›¸å½“äºParent.call(this, 'lisi')ï¼ŒæŠŠçˆ¶ç±»å½“åšæ™®é€šå‡½æ•°æ‰§è¡Œï¼Œç»™çˆ¶ç±»æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ï¼Œè®©çˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘å­ç±»çš„å®ä¾‹ã€‚
        this.age = age;
    }
    getAge() {
        console.log(this.age);
    }
}

// Child.prototype = Object.create(Parent.prototype); ä¸å…è®¸é‡å®šå‘åŸå‹æŒ‡å‘
const child = new Child(12);
console.log(child);
```
::: warning
éœ€è¦æ³¨æ„çš„æ˜¯ï¼šåœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œåªæœ‰è°ƒç”¨superä¹‹åï¼Œæ‰å¯ä»¥ä½¿ç”¨thiså…³é”®å­—ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸ºå­ç±»å®ä¾‹çš„æ„å»ºï¼ŒåŸºäºçˆ¶ç±»å®ä¾‹ï¼Œåªæœ‰superæ–¹æ³•æ‰èƒ½è°ƒç”¨çˆ¶ç±»å®ä¾‹ã€‚
:::
## Object.getPrototypeOf()
Object.getPrototypeOfæ–¹æ³•å¯ä»¥ç”¨æ¥ä»å­ç±»ä¸Šè·å–çˆ¶ç±»ã€‚
```js
console.log(Object.getPrototypeOf(Child) === Parent); // true
```
å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼Œä¸€ä¸ªç±»æ˜¯å¦ç»§æ‰¿äº†å¦ä¸€ä¸ªç±»ã€‚
## superå…³é”®å­—
### superä½œä¸ºå‡½æ•°
```js
class Parent {
    constructor() {
        // new.targetæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°
        // è¿™é‡Œè¾“å‡ºChildï¼Œè¯´æ˜åœ¨superæ‰§è¡Œæ—¶ï¼Œå®ƒæŒ‡å‘çš„æ˜¯å­ç±»Childçš„æ„é€ å‡½æ•°ï¼Œè€Œä¸æ˜¯çˆ¶ç±»Parentçš„æ„é€ å‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œsuperå†…éƒ¨çš„thisæŒ‡å‘çš„æ˜¯Childã€‚
        console.log(new.target.name); // Child
    }
}
class Child extends Parent {
    constructor() {
        // superä½œä¸ºå‡½æ•°è°ƒç”¨æ—¶ï¼Œåªèƒ½ç”¨åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹å°±ä¼šæŠ¥é”™ã€‚
        super();
    }
}

const child = new Child();
```
::: warning
éœ€è¦æ³¨æ„ï¼šsuperè™½ç„¶ä»£è¡¨äº†çˆ¶ç±»Açš„æ„é€ å‡½æ•°ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯å­ç±»Bçš„å®ä¾‹ï¼Œå³superå†…éƒ¨çš„thisæŒ‡çš„æ˜¯Bçš„å®ä¾‹ï¼Œå› æ­¤super()åœ¨è¿™é‡Œç›¸å½“äºA.prototype.constructor.call(this)ã€‚
:::
### superä½œä¸ºå¯¹è±¡
```js
class Parent {
    constructor() {
        this.name = 'lisi';
    }
    sayName() {
        return 'çˆ¶ç±»';
    }
}
Parent.prototype.age = 12;
class Child extends Parent {
    constructor() {
        super();
        // è¿™é‡Œå°†superå½“ä½œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨æ™®é€šæ–¹æ³•ä¸­ï¼Œæ­¤æ—¶superæŒ‡å‘Parent.prototype
        // super.sayName()ç›¸å½“äºParent.prototype.sayName()
        console.log(super.sayName());
        // ç”±äºsuperæŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥å®šä¹‰åœ¨çˆ¶ç±»å®ä¾‹ä¸Šçš„æ–¹æ³•æˆ–å±æ€§ï¼Œæ˜¯æ— æ³•é€šè¿‡superè°ƒç”¨çš„ã€‚
        console.log(super.name); // undefined
        // çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§æ˜¯å¯ä»¥è®¿é—®åˆ°çš„
        console.log(super.age); // 12
    }
}

const child = new Child();
```
::: tip
ES6è§„å®šï¼Œåœ¨å­ç±»æ™®é€šæ–¹æ³•ä¸­é€šè¿‡superè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•æ—¶ï¼Œæ–¹æ³•å†…éƒ¨çš„thisæŒ‡å‘å½“å‰çš„å­ç±»å®ä¾‹ã€‚
:::
```js
class Parent {
    constructor() {
        this.name = 'çˆ¶ç±»';
    }
    sayName() {
        console.log(this.name);
    }
}

class Child extends Parent {
    constructor() {
        super();
        this.name = 'å­ç±»';
    }
    print() {
        super.sayName(); // è°ƒç”¨çˆ¶ç±»çš„åŸå‹æ–¹æ³•sayName
    }
}

const child = new Child();
child.print(); // å­ç±»
```
ä¸Šé¢ä»£ç ä¸­ï¼Œsuper.sayName()è™½ç„¶è°ƒç”¨çš„æ˜¯Parent.prototype.sayName()ï¼Œä½†æ˜¯Parent.prototype.sayName()å†…éƒ¨çš„thisæŒ‡å‘å­ç±»Childçš„å®ä¾‹ï¼Œå¯¼è‡´è¾“å‡ºçš„æ˜¯`å­ç±»`ï¼Œè€Œä¸æ˜¯`çˆ¶ç±»`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®é™…ä¸Šæ‰§è¡Œçš„æ˜¯super.print.call(this)ã€‚
### classç»§æ‰¿åº”ç”¨
1. é€šè¿‡classå®šä¹‰ç±»å’Œå®ç°ç±»çš„ç»§æ‰¿
2. åœ¨ç±»ä¸­é€šè¿‡constructorå®šä¹‰æ„é€ æ–¹æ³•
3. é€šè¿‡newæ¥åˆ›å»ºç±»çš„å®ä¾‹
4. é€šè¿‡extendsæ¥å®ç°ç±»çš„ç»§æ‰¿
5. é€šè¿‡superè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•
6. å­ç±»å¯ä»¥é‡å†™ä»çˆ¶ç±»ä¸­ç»§æ‰¿çš„æ™®é€šæ–¹æ³•
```js
class Parent {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    say() {
        console.log(`${this.name}--${this.age}`);
    }
}

const p = new Parent('lisi', 24);
p.say();

class Child extends Parent {
    constructor(name, age, hobbies) {
        super(name, age); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
        this.hobbies = hobbies;
    }
    // é‡å†™ä»çˆ¶ç±»ä¸­ç»§æ‰¿çš„æ™®é€šæ–¹æ³•
    say() {
        console.log(`${this.name}--${this.age}--${this.hobbies}`);
    }
}
const c = new Child('wangwu', 12, 'ğŸ€');
c.say();
```
## ç±»çš„prototypeå±æ€§å’Œ`__proto__`å±æ€§

## å‚è€ƒæ–‡æ¡£
1. [Class çš„ç»§æ‰¿](http://es6.ruanyifeng.com/#docs/class-extends)