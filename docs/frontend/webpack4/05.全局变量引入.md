---
title: 5. å…¨å±€å˜é‡å¼•å…¥
---
## é€šè¿‡expose-loaderæš´éœ²åˆ°å…¨å±€window
```bash
yarn add expose-loader -D
```
```js
console.log('è®¾ç½®å…¨å±€å˜é‡');
import $ from 'expose-loader?$!jquery';
console.log('$---', $);
console.log('window.$---', window.$);
console.log('window.jQuery---', window.jQuery);
```
ä¸Šé¢ä»£ç ä¸­`import $ from 'expose-loader?$!jquery'`ï¼Œå°†jQueryæš´éœ²è‡³å…¨å±€å¹¶ç§°ä¸º$ï¼Œè¿™æ ·window.$å°±å¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ä½¿ç”¨ã€‚
è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img :src="$withBase('/webpack4/expose-loader.png')" alt="">

é™¤äº†æš´éœ²ä¸ºwindow.$ä¹‹å¤–ï¼Œå‡è®¾è¿˜æƒ³æŠŠå®ƒæš´éœ²ä¸ºwindow.jQueryï¼Œé…ç½®å¦‚ä¸‹ï¼š
```js
module: {
    rules: [
        {
            test: require.resolve('jquery'),
            use: [
                {
                    loader: 'expose-loader',
                    options: '$'
                }, {
                    loader: 'expose-loader',
                    options: 'jQuery'
                }
            ]
        }
    ]
}
```
```js
console.log('è®¾ç½®å…¨å±€å˜é‡');
import $ from 'expose-loader?$!jquery';
console.log('$---', $);
console.log('window.$---', window.$);
console.log('window.jQuery---', window.jQuery);
```
<img :src="$withBase('/webpack4/expose-loader2.png')" alt="">

## é€šè¿‡webpack.ProvidePluginç»™æ‰€æœ‰æ–‡ä»¶æ³¨å…¥$
```js
new webpack.ProvidePlugin({
    $: 'jquery'
})
```
## é€šè¿‡scriptæ ‡ç­¾å¼•å…¥
## å‘ç‚¹æ±‡æ€»
::: warning
åœ¨index.htmlä¸­é€šè¿‡scriptæ ‡ç­¾å¼•å…¥äº†jquery, ä¸æ­¤åŒæ—¶ä¹Ÿé€šè¿‡npmå®‰è£…äº†jqueryå¹¶åœ¨é¡¹ç›®æ–‡ä»¶ä¸­å¼•ç”¨ï¼Œè¿™ä¼šå¯¼è‡´é‡æ–°æ‰“åŒ…jqueryã€‚
:::
è§£å†³åŠæ³•æ˜¯ï¼šé€šè¿‡externalsé…ç½®é¡¹ï¼Œåœ¨æ‰“åŒ…çš„æ—¶å€™å¿½ç•¥jqueryã€‚externalsé…ç½®é€‰é¡¹æä¾›äº†ã€Œä»è¾“å‡ºçš„bundleä¸­æ’é™¤ä¾èµ–ã€çš„æ–¹æ³•ã€‚é˜²æ­¢å°†æŸäº› importçš„åŒ…(package)æ‰“åŒ…åˆ°bundleä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶(runtime)å†å»ä»å¤–éƒ¨è·å–è¿™äº›æ‰©å±•ä¾èµ–(external dependencies)ã€‚ä¸¾ä¸ªğŸŒ°ï¼š
```js
externals: {
    jquery: 'jQuery'
}
```
>æ²¡æœ‰è®¾ç½®externalsçš„æ‰“åŒ…ç»“æœï¼šbundle.jsæ‰“åŒ…ç»“æœä¸º87.7 KiBï¼Œjqueryä¹Ÿè¢«æ‰“åŒ…äº†ï¼Œä¸ç¬¦åˆé¢„æœŸã€‚

<img :src="$withBase('/webpack4/global.png')" alt="">

>è®¾ç½®äº†externalsçš„æ‰“åŒ…ç»“æœï¼šbundle.jsæ‰“åŒ…ç»“æœä¸º1.12 KiBï¼Œjqueryæ²¡æœ‰è¢«æ‰“åŒ…ï¼Œç¬¦åˆé¢„æœŸã€‚

<img :src="$withBase('/webpack4/global2.png')" alt="">