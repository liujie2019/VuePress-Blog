---
title: Webpack4零配置打包
---
## webpack4零配置
>1. 创建项目目录并进入目录：
```js
mkdir webpack4-demo && cd $_
```
>2. 初始化package.json文件
```js
npm init -y
```
>3. 安装webpack(需要同时安装webpack-cli)
```js
npm i webpack webpack-cli -D
```
>4. 打开package.json文件，并添加相应的build(构建)脚本：
```js
"scripts": {
  "dev": "webpack --mode develop",
  "build": "webpack --mode production"
}
```
>需要注意的是：在webpack4以前的版本中，必须在`webpack.config.js`的配置文件中通过`entry`属性定义`entry point`(入口点)和output属性定义输出目录和文件。但是，从`webpack4`开始，我们不需要必须定义`entry point`(入口点)和输出目录了，webpack将入口点默认为`./src/index.js`，`./dist/main.js`为输出模块包。
所谓`entry point`(入口点)是`webpack`寻找开始构建 `Javascript`包的文件。

>`webpack`同时支持`es6，CommonJS，AMD`三种模块化规范。

```js
// ES6
import sum from './vender/sum';
console.log('sum(1, 2) = ', sum(1, 2));

// CommonJS
var minus = require('./vender/minus');
console.log('minus(1, 2) = ', minus(1, 2));

// AMD
require(['./vender/multi'], function(multi) {
    console.log('multi(1, 2) = ', multi(1, 2));
});
```
>运行`npm run build`打包：

![3a081a611e542f03b16c242bc02a3d6b.png](evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p564)
![48e0e1b270c7a71ddbfbcefb451cf69c.png](evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p566)

## production(生产)和development(开发)模式
>运行如下命令：
```js
npm run dev
```
查看`./dist/main.js`，是一个未被压缩过的文件。
>运行如下命令：
```js
npm run build
```
查看`./dist/main.js`，是一个未被压缩过的文件。

这说明了，`production mode`(生产模式)可以开箱即用地进行各种优化。包括压缩，作用域提升，tree-shaking等；`development mode`(开发模式)针对速度进行了优化，仅仅提供了一种不压缩的`bundle`。

在`webpack4`中，我们可以在没有一行配置的情况下完成任务！只需定义`–mode`参数。

## 覆盖默认entry(入口)/output(输出)
webpack4支持了零配置，但如何覆盖默认`entry point`(入口点) 和默认`output`(输出)呢？

在`package.json`中进行如下配置：
```js
"scripts": {
  "dev": "webpack --mode development ./demo/src/js/index.js --output ./demo/dist/main.js",
  "build": "webpack --mode production ./demo/src/js/index.js --output ./demo/dist/main.js"
}
```
