---
title: 5. thisçš„å·¥ä½œåŸç†
---
::: tip
å†™ä½œä¸æ˜“ï¼ŒStaræ˜¯æœ€å¤§é¼“åŠ±ï¼Œæ„Ÿè§‰å†™çš„ä¸é”™çš„å¯ä»¥ç»™ä¸ªStarâ­ï¼Œè¯·å¤šå¤šæŒ‡æ•™ã€‚[Githubåœ°å€](https://github.com/liujie2019/VuePress-Blog)ã€‚
:::

## thisçš„å·¥ä½œåŸç†(5ç§æƒ…å†µ)
::: tip
é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼šthisè¦åœ¨ä»£ç æ‰§è¡Œæ—¶æ‰èƒ½ç¡®è®¤ï¼Œå®šä¹‰æ—¶æ— æ³•ç¡®è®¤ã€‚thisè¦åœ¨ä»£ç æ‰§è¡Œæ—¶æ‰èƒ½ç¡®è®¤ï¼Œå®šä¹‰æ—¶æ— æ³•ç¡®è®¤ã€‚thisè¦åœ¨ä»£ç æ‰§è¡Œæ—¶æ‰èƒ½ç¡®è®¤ï¼Œå®šä¹‰æ—¶æ— æ³•ç¡®è®¤ã€‚
ä¸ºä»€ä¹ˆå‘¢?å› ä¸ºthisæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ‰§è¡Œä¸Šä¸‹æ–‡éœ€è¦åœ¨ä»£ç æ‰§è¡Œçš„æ—¶å€™äº§ç”Ÿï¼Œè€Œä¸æ˜¯å®šä¹‰çš„æ—¶å€™ã€‚
:::

### å…¨å±€ä½œç”¨åŸŸå†…
å½“åœ¨å…¨å±€ä½œç”¨åŸŸå†…ä½¿ç”¨thisæ—¶ï¼Œå®ƒå°†ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œå³windowå¯¹è±¡ã€‚
ä¸¾ä¸ªğŸŒ°ï¼š
```js
function test(a) {
    this.a = a; //ç›¸å½“äºwindow.a
}
test(3); //è¿™é‡Œç›¸å½“äºwindow.test(3)
// æ‰€ä»¥testå‡½æ•°ä¸­çš„thisæŒ‡å‘äº†window
console.log(a); //3  è¿™é‡Œç›¸å½“äºä¸è®¿é—®window.a
```
å†æ¥çœ‹ä¸ªğŸŒ°ï¼š
```js
// è¿™é‡Œçš„å‡½æ•°testå®é™…æ˜¯è¢«Windowå¯¹è±¡è°ƒç”¨çš„
function test() {
    var name = 'lisi';
    console.log(this.name); // undefined
    console.log(this); // WindowÂ {postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, parent: Window,Â â€¦}
}
test(); //è¿™é‡Œç›¸å½“äºwindow.test();
```
### ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨
æŒ¡åœ¨å…¨å±€ä½œç”¨åŸŸå†…è°ƒç”¨å‡½æ•°æ—¶ï¼Œthisä¹Ÿä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ã€‚
ä¸¾ä¸ªğŸŒ°ï¼š
```js
var obj = {
    a: 0,
    b: 0,
    say:function(a, b) {
        var sayA = function(a) {
            console.log(this); // WindowÂ {postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, parent: Window,Â â€¦}
            this.a = a;
        };
        var sayB = function(b) {
            console.log(this); // WindowÂ {postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, parent: Window,Â â€¦}
            this.b = b;
        };
        sayA(a);
        sayB(b);
    }
}
obj.say(1, 1);
console.log(obj.a + '----' + obj.b); //0--0
console.log(window.a + '-----' + window.b); //1-----1
```
::: tip
è§£æï¼šå¯¹äºsayæ–¹æ³•ä¸­çš„sayAå’ŒsayBä¸­çš„thisæ¥è¯´ï¼šä¸æ˜¯é€šè¿‡newæ“ä½œç¬¦æ¥è°ƒç”¨çš„ï¼Œä¹Ÿæ²¡æœ‰é€šè¿‡dot(.)æ¥è°ƒç”¨ï¼Œå› æ­¤thisæŒ‡å‘windowã€‚
:::
### ä½œä¸ºå¯¹è±¡æ–¹æ³•è°ƒç”¨
thisæŒ‡å‘è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡ã€‚
ä¸¾ä¸ªğŸŒ°ï¼š
```js
var obj = {
    name: 'lisi',
    sayName: function() {
        console.log(this.name); //lisi
    }
}
obj.sayName();
```
å†æ¥çœ‹ä¸ªğŸŒ°ï¼š
```js
var name = 'wangwu';
var obj = {
    name: 'lisi',
    sayName: function() {
        console.log(this.name); //lisi
    }
}
window.obj.sayName();
```
::: tip
å¯¹è±¡å­—é¢é‡obj = {}ï¼Œå˜é‡objå…¶å®ä¹Ÿæ˜¯windowå¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·æ¥è°ƒç”¨window.obj.sayName()ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æœ‰thisï¼Œè¿™ä¸ªå‡½æ•°ä¸­åŒ…å«å¤šä¸ªå¯¹è±¡ï¼Œå°½ç®¡è¿™ä¸ªå‡½æ•°æ˜¯è¢«æœ€å¤–å±‚çš„å¯¹è±¡æ‰€è°ƒç”¨ï¼ŒthisæŒ‡å‘çš„ä¹Ÿåªæ˜¯å®ƒä¸Šä¸€çº§çš„å¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡ŒthisæŒ‡å‘objï¼Œè€Œä¸æ˜¯windowã€‚
:::
```js
var obj = {
    name: 'wangwu',
    objInner: {
        name: 'lisi',
        sayName: function() {
            console.log(this.name); //lisi
        }
    }
}
obj.objInner.sayName();
```
::: tip
å¦‚æœä¸€ä¸ªå‡½æ•°ä¸­æœ‰thisï¼Œè¿™ä¸ªå‡½æ•°ä¸­åŒ…å«å¤šä¸ªå¯¹è±¡ï¼Œå°½ç®¡è¿™ä¸ªå‡½æ•°æ˜¯è¢«æœ€å¤–å±‚çš„å¯¹è±¡æ‰€è°ƒç”¨ï¼ŒthisæŒ‡å‘çš„ä¹Ÿåªæ˜¯å®ƒä¸Šä¸€çº§çš„å¯¹è±¡ã€‚
:::
```js
var obj = {
    name:"wangwu",
    objInner:{
        sayName: function() {
            console.log(this.name); //undefined
        }
    }
}
obj.objInner.sayName();
```
::: tip
å°½ç®¡å¯¹è±¡objInnerä¸­æ²¡æœ‰å±æ€§nameï¼Œè¿™ä¸ªthisæŒ‡å‘çš„ä¹Ÿæ˜¯å¯¹è±¡objInnerï¼Œå› ä¸ºthisåªä¼šæŒ‡å‘å®ƒçš„ä¸Šä¸€çº§å¯¹è±¡ï¼Œä¸ç®¡è¿™ä¸ªå¯¹è±¡ä¸­æœ‰æ²¡æœ‰thisè¦çš„ä¸œè¥¿ã€‚
:::
```js
 var obj = {
    name: 'wangwu',
    objInner: {
        name: 'lisi',
        sayName: function() {
            console.log(this.name); //undefined
            console.log(this); //WindowÂ {postMessage: Æ’, blur: Æ’, focus: Æ’, close: Æ’, parent: Window,Â â€¦}
        }
    }
}
var fn = obj.objInner.sayName;
fn();
```
### ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨
åœ¨æ„é€ å‡½æ•°å†…éƒ¨ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚
ä¸¾ä¸ªğŸŒ°ï¼š
```js
function Person(name, age) {
    this.name = name;
    this.age = age;
}
var person1 = new Person('lisi', 18);
console.log(person1.name); // lisi
var person2 = Person('wangwu', 12);
// person2æ˜¯undefinedï¼Œå› ä¸ºPersonå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé»˜è®¤è¿”å›undefined
// console.log(person2.name); // Uncaught TypeError: Cannot read property 'name' of undefined
console.log(window.name); // wangwu
// Person('wangwu', 12)ç›¸å½“äºwindow.Person('wangwu', 12)
```
### æ˜¾å¼çš„è®¾ç½®thisæŒ‡å‘(callã€applyã€bind)
å½“ä½¿ç”¨callæˆ–è€…applyæ–¹æ³•æ—¶ï¼Œå‡½æ•°å†…çš„thiså°†ä¼šè¢«æ˜¾å¼è®¾ç½®ä¸ºå‡½æ•°è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚
```js
function Test(a, b) {
    this.a = a;
    this.b = b;
    this.say = function(a, b) {
        this.a = a;
        this.b = b;
    }
}
var obj1 = new Test(1, 1);
var obj2 = {a:2, b:2};
obj1.say.call(obj2, 3, 3);
console.log(obj2.a + '----' + obj2.b); // 3----3
```
::: tip
è§£æï¼šapplyå’Œ callè¿™ä¸¤ä¸ªæ–¹æ³•åˆ‡æ¢å‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå³å¯ä»¥æ”¹å˜thisæŒ‡å‘ã€‚obj1.say.call(obj2, 3, 3)å®é™…ä¸Šæ˜¯obj2.say(3, 3)ï¼Œæ‰€ä»¥sayä¸­çš„thiså°±æŒ‡å‘äº†obj2ã€‚
:::
```js
let fn = function(name, age) {
    console.log(name); // lisi
    console.log(this); // { a: 2 }
}.bind({a: 2});

fn('lisi', 12);
```
### ç®­å¤´å‡½æ•°thisæŒ‡å‘
ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œçœ‹å…¶å¤–å±‚çš„æ˜¯å¦æœ‰å‡½æ•°ï¼Œå¦‚æœæœ‰ï¼Œå¤–å±‚å‡½æ•°çš„thiså°±æ˜¯å†…éƒ¨ç®­å¤´å‡½æ•°çš„thisï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™thisæ˜¯windowã€‚
```js
const name = 'wangwu';
const obj = {
    name: 'lisi',
    sayName: function() {
        console.log(this); // {name: "lisi", sayName: Æ’}
        setTimeout(() => {
            console.log(this.name); // lisi
        }, 1000);
    }
};
obj.sayName();
```
<img :src="$withBase('/js/this.png')" alt="">

## ç›¸å…³é¢˜ç›®
### å½“thisç¢°åˆ°return
```js
function Fn() {
    this.username = 'ç‹äº”';
    return 1;
    // return undefined;
}
var a = new Fn();
console.log(a); //FnÂ {username: "ç‹äº”"}
console.log(a.username); //ç‹äº”

function Fn1() {
    this.username = 'ç‹äº”';
    return function(){};
}
var b = new Fn1();
console.log(b); //Æ’ (){}}
console.log(b.username); //undefined

function Fn2() {
    this.username = 'lisi';
    return {};
}
var obj = new Fn2();
console.log(obj); //Object{}
console.log(obj.username); //undefined

// è™½ç„¶nullä¹Ÿæ˜¯å¯¹è±¡ï¼Œä½†æ˜¯åœ¨è¿™é‡Œthisè¿˜æ˜¯æŒ‡å‘é‚£ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œå› ä¸ºnullæ¯”è¾ƒç‰¹æ®Š
function Fn3() {
    this.username = 'ç‹äº”';
    return null;
}
var a = new Fn3();
console.log(a); // Fn3Â {username: "ç‹äº”"}
console.log(a.username); //ç‹äº”
```
::: tip
å¦‚æœè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆthisæŒ‡å‘çš„å°±æ˜¯é‚£ä¸ªè¿”å›çš„å¯¹è±¡ï¼›å¦‚æœè¿”å›å€¼ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆthisè¿˜æ˜¯æŒ‡å‘å‡½æ•°çš„å®ä¾‹ã€‚
:::
```js
function Foo() {
    // ä¼šè¦†ç›–å…¨å±€çš„getNameæ–¹æ³•
    getName = function() {
        // console.log('----', this);
        console.log(1);
    }
    return this;
}
Foo.getName = function() {
    console.log(2);
}
Foo.prototype.getName = function() {
    console.log(3);
}
var getName = function() {
    console.log(4);
}
// ä¼šè¢«è¦†ç›–
function getName() {
    console.log(5);
}

Foo.getName(); // 2
getName(); // 4
// Foo()å½“åšæ™®é€šå‡½æ•°è°ƒç”¨
Foo().getName(); // 1
getName(); // 1
new Foo().getName(); // 3
```
## å‚è€ƒæ–‡æ¡£
1. [JavaScript çš„ this åŸç†](http://www.ruanyifeng.com/blog/2018/06/javascript-this.html)